<!DOCTYPE html>
  <head>
    <html lang="en">
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="Cats-Data-Visualizations/app/assets/stylesheets/bootrstrap.min.cssâ€>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="Cats-Data-Visualizations/app/assets/javascripts/bootstrap.bundle.min.js"></script>
    <script src="Cats-Data-Visualizations/app/assets/javascripts/bootstrap.min.js"></script>
                                                                                  
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
   </head>

      // Load package from google charts
      google.charts.load('current', {'packages':['corechart']});

      // Draw the 2 pie charts
      google.charts.setOnLoadCallback(drawSchoolA);
      google.charts.setOnLoadCallback(drawSchoolB);

      //draw School A chart
      function drawSchoolA() {

        //set up data
        var low = <%= @percLowIncome1%>*100 ;
        var oth = (1 - <%= @percLowIncome1 %>)*100 ;

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Type');
        data.addColumn('number', 'Percentage');
        data.addRows([
          ['Low Income', low],
          ['Other', oth]
        ]);

        //create specifications
        var options = {
          title: 'Percentage Low Income vs Attendance vs Grad Rate',
          colors: ['#fe6f5e','#3d0c02'],
          is3D: true,
        };

        //create + draw chart a
        var chart = new google.visualization.PieChart(document.getElementById('schoolA_chart_div'));
        chart.draw(data, options);
      }

      function drawSchoolB(){

      //set up data
        var low = <%= @percLowIncome2%>*100 ;
        var oth = (1 - <%=@percLowIncome2%>)*100;

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Type');
        data.addColumn('number', 'percentage');
        data.addRows([
          ['Low Income', low],
          ['Other', oth]
        ]);

        //set up chart specifications
        var options = {
          title: 'Percentage Low Income vs Attendance vs Grad Rate',
          colors: ['#3c1e62', '#aa8dc8'],
          is3D: true,
        };

        //create and draw chart
        var chart = new google.visualization.PieChart(document.getElementById('schoolB_chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <table class = 'columns'>
      <tr>
        <td><%= @school1 %> <%= @year%> </td>
        <td><%= @school2 %> <%= @year%> </td>
      </tr>
      <tr>
      <td><div id="schoolA_chart_div" style="width: 900px; height: 500px;"></div></td>
      <td><div id="schoolB_chart_div" style="width: 900px; height: 500px;"></div></td>
      </tr>
      <tr>
        <td>Avg Attendance Rate Per Student: <%= @attendanceRate1 %></td>
        <td>Avg Attendance Rate Per Student: <%= @attendanceRate2 %></td>
      </tr>
      <tr>
        <td>Grad Rate: <%= @gradRate1 - (@gradRate1 %1) %> </td>
        <td>Grad Rate: <%= @gradRate2 - (@gradRate2 %1) %></td>
      </tr>
    </table>
  </body>
</html>
